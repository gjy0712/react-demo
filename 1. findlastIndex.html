<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>findLastIndex</title>
</head>

<body>
  <script type="text/javascript">
    // 实现一个函数findLastIndex(),返回指定数在“有序”数组中最后一次出现位置的索引。
    // 如：findLastIndex([1,2,3,3,3,4,5],3),返回4。
    // 时间复杂度是多少？什么情况下时间复杂度最高？

    // 自己研究的
    function findLastIndex(arr, num) {
      let targetArr = []
      for (let i = 0; i < arr.length; i++) {
        const item = arr[i];
        if (item === num) {
          targetArr.push(i)
        }
      }
      console.log(targetArr[targetArr.length - 1])
    }
    // findLastIndex([1, 2, 3, 3, 3, 4, 5], 3); // 时间复杂度：O(n)


    // 官方2分查找法，时间复杂度：O(logn)
    function lastTargetIndex(arr, target) {
      const len = arr.length;
      let left = 0,
        right = len - 1;

      while (true) {
        if (arr[left] > target || arr[right] < target) return -1;

        let middle = Math.floor((right - left) / 2 + left);
        if (arr[middle] === target) {
          left = middle;
        } else if (arr[middle] > target) {
          right = middle;
        } else {
          right = middle;
        }

        if (left + 1 === right && arr[right] === target) {
          return right;
        }

        if (left + 1 === right && arr[left] === target) {
          return left;
        }
      }
    }
    console.log(findLastIndex([1, 2, 3, 3, 3, 4, 5], 3));

    // 实现方式二
    const findLastIndex2 = (nums, target) => {
      const len = nums.length;
      if (nums.len < 1) return -1;
      let l = 0,
        r = len;
      while (l < r) {
        const mid = (l + r) >> 1;
        target < nums[mid] ? (r = mid) : (l = mid + 1);
      }
      return l - 1;
    };
    // console.log(findLastIndex2([1, 2, 3, 3, 3, 4, 5], 3));
  </script>
</body>

</html>